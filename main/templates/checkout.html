<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ - Aurana Chocolate</title>
    {% load static tailwind_tags %}
    {% tailwind_css %}
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        .neo-card {
            background: rgba(250, 250, 250, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(220, 220, 220, 0.3);
            box-shadow: 
                0 8px 32px 0 rgba(20, 20, 20, 0.1),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .puffy-btn {
            background: linear-gradient(145deg, #8B5A3C, #6F4C34);
            box-shadow: 0 4px 15px rgba(139, 90, 60, 0.4);
            transition: all 0.3s ease;
        }
        .puffy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 90, 60, 0.6);
        }
        .hover-lift {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .hover-lift:hover {
            transform: translateY(-4px);
        }
        .input-glow:focus {
            box-shadow: 0 0 0 3px rgba(139, 90, 60, 0.1);
            border-color: #8B5A3C;
        }
        .step-active {
            background: linear-gradient(145deg, #8B5A3C, #6F4C34);
            color: white;
            transform: scale(1.1);
        }
        .step-completed {
            background: linear-gradient(145deg, #10B981, #059669);
            color: white;
        }
        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .progress-bar {
            animation: progress 1s ease-in-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 via-amber-100 to-amber-50 font-['Inter'] min-h-screen">
    <!-- –®–∞–ø–∫–∞ -->
    <header class="bg-white/80 backdrop-blur-md border-b border-white/20 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-2xl flex items-center justify-center shadow-lg hover-lift">
                    <span class="text-white text-lg">üç´</span>
                </div>
                <h1 class="text-xl font-bold text-amber-900 font-['Playfair_Display']">Aurana</h1>
            </div>
            
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="/" class="text-amber-700 hover:text-amber-600 transition-all duration-300 font-medium hover-lift">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/catalog/" class="text-amber-700 hover:text-amber-600 transition-all duration-300 font-medium hover-lift">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/cart/" class="text-amber-700 hover:text-amber-600 transition-all duration-300 font-medium relative hover-lift">
                    –ö–æ—Ä–∑–∏–Ω–∞
                    {% if cart_total > 0 %}
                    <span class="absolute -top-3 -right-3 bg-gradient-to-r from-amber-600 to-amber-800 text-white rounded-full w-6 h-6 text-xs flex items-center justify-center shadow-lg">
                        {{ cart_total }}
                    </span>
                    {% endif %}
                </a>
            </nav>

            <div class="md:hidden flex items-center space-x-4">
                <a href="/cart/" class="relative p-2 hover-lift">
                    <div class="w-8 h-8 bg-gradient-to-br from-amber-600 to-amber-800 rounded-xl flex items-center justify-center shadow-lg">
                        <span class="text-white text-sm">üõí</span>
                    </div>
                </a>
                
                <button id="menu-toggle" class="p-2 hover-lift">
                    <div class="w-8 h-8 bg-gradient-to-br from-amber-600 to-amber-800 rounded-xl flex items-center justify-center shadow-lg">
                        <span class="text-white text-lg">‚ò∞</span>
                    </div>
                </button>
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden bg-white/95 backdrop-blur-md hidden absolute top-full left-0 right-0 shadow-2xl border-b border-amber-200">
            <div class="container mx-auto px-4 py-4 space-y-4">
                <a href="/" class="block py-3 text-amber-900 hover:text-amber-600 border-b border-amber-100 font-medium transition-all duration-300 hover-lift">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/catalog/" class="block py-3 text-amber-900 hover:text-amber-600 border-b border-amber-100 font-medium transition-all duration-300 hover-lift">–ö–∞—Ç–∞–ª–æ–≥</a>
            </div>
        </div>
    </header>

    <!-- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ -->
    <section class="container mx-auto px-4 py-8">
        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
        <div class="max-w-4xl mx-auto mb-12">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold shadow-lg step-active hover-lift">
                        1
                    </div>
                    <span class="text-amber-900 font-medium">–î–∞–Ω–Ω—ã–µ</span>
                </div>
                <div class="flex-1 h-1 bg-amber-200 mx-4">
                    <div class="h-full bg-amber-500 progress-bar rounded-full"></div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full bg-amber-200 text-amber-700 flex items-center justify-center font-bold shadow-lg hover-lift">
                        2
                    </div>
                    <span class="text-amber-700">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</span>
                </div>
            </div>
        </div>

        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
            <div class="space-y-6">
                <div class="neo-card rounded-3xl p-8">
                    <h2 class="text-2xl font-bold text-amber-900 mb-6 font-['Playfair_Display']">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
                    
                    {% if error_message %}
                    <div class="glass-card rounded-2xl p-4 mb-6 border-l-4 border-red-500">
                        <p class="text-red-700 font-medium flex items-center">
                            <span class="text-lg mr-2">‚ö†Ô∏è</span>
                            {{ error_message }}
                        </p>
                    </div>
                    {% endif %}

                    <form method="post" class="space-y-6">
                        {% csrf_token %}
                        
                        <!-- –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-amber-900 font-medium mb-2 text-sm">–ò–º—è *</label>
                                <input type="text" name="name" 
                                       class="w-full px-4 py-3 border border-amber-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-amber-500 input-glow bg-white/50"
                                       placeholder="–í–∞—à–µ –∏–º—è"
                                       required>
                            </div>
                            <div>
                                <label class="block text-amber-900 font-medium mb-2 text-sm">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                <input type="tel" name="phone" 
                                       class="w-full px-4 py-3 border border-amber-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-amber-500 input-glow bg-white/50"
                                       placeholder="+7 (___) ___-__-__"
                                       required>
                            </div>
                        </div>

                        <div>
                            <label class="block text-amber-900 font-medium mb-2 text-sm">Email</label>
                            <input type="email" name="email" 
                                   class="w-full px-4 py-3 border border-amber-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-amber-500 input-glow bg-white/50"
                                   placeholder="email@example.com">
                        </div>

                        <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                        <div>
                            <label class="block text-amber-900 font-medium mb-2 text-sm">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
                            <textarea name="address" 
                                      class="w-full px-4 py-3 border border-amber-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-amber-500 input-glow bg-white/50 resize-none"
                                      placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"
                                      rows="3"></textarea>
                        </div>

                        <!-- –ü–∞—Ä–æ–ª—å –¥–ª—è –õ–ö -->
                        <div class="glass-card rounded-2xl p-4">
                            <label class="block text-amber-900 font-medium mb-2 text-sm flex items-center">
                                <span class="mr-2">üîê</span>
                                –ü–∞—Ä–æ–ª—å –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
                            </label>
                            <input type="password" name="password" 
                                   class="w-full px-4 py-3 border border-amber-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-amber-500 input-glow bg-white/50"
                                   placeholder="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
                            <p class="text-amber-600 text-xs mt-2">–ï—Å–ª–∏ —É–∫–∞–∂–µ—Ç–µ –ø–∞—Ä–æ–ª—å, —Å–æ–∑–¥–∞–¥–∏–º –≤–∞–º –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</p>
                        </div>

                        <button type="submit" 
                                class="w-full puffy-btn text-white font-bold py-4 rounded-2xl text-lg hover-lift flex items-center justify-center space-x-2">
                            <span>üöÄ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</span>
                            <span class="text-xl">‚Üí</span>
                        </button>
                    </form>
                </div>

                <!-- –ì–∞—Ä–∞–Ω—Ç–∏–∏ -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-amber-900 mb-4 flex items-center">
                        <span class="mr-2">üõ°Ô∏è</span>
                        –ì–∞—Ä–∞–Ω—Ç–∏–∏ Aurana
                    </h3>
                    <div class="space-y-3 text-sm text-amber-700">
                        <div class="flex items-center space-x-2">
                            <span class="text-amber-500">‚úì</span>
                            <span>–°–≤–µ–∂–∏–π —à–æ–∫–æ–ª–∞–¥ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-amber-500">‚úì</span>
                            <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç 2000‚ÇΩ</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-amber-500">‚úì</span>
                            <span>–í–æ–∑–≤—Ä–∞—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞ -->
            <div class="space-y-6">
                <div class="neo-card rounded-3xl p-8 sticky top-24">
                    <h2 class="text-2xl font-bold text-amber-900 mb-6 font-['Playfair_Display']">–í–∞—à –∑–∞–∫–∞–∑</h2>
                    
                    <!-- –¢–æ–≤–∞—Ä—ã -->
                    <div class="space-y-4 mb-6">
                        {% for product_id, item in cart.items %}
                        <div class="flex items-center justify-between py-3 border-b border-amber-100">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl flex items-center justify-center">
                                    <span class="text-white">üç´</span>
                                </div>
                                <div>
                                    <p class="font-medium text-amber-900 text-sm">{{ item.name }}</p>
                                    <p class="text-amber-600 text-xs">{{ item.quantity }} √ó {{ item.price }}‚ÇΩ</p>
                                </div>
                            </div>
                            <span class="font-bold text-amber-900">{{ item.price|floatformat:2 }}‚ÇΩ</span>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- –ò—Ç–æ–≥–æ -->
                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between text-amber-700">
                            <span>–¢–æ–≤–∞—Ä—ã</span>
                            <span>{{ total|floatformat:2 }}‚ÇΩ</span>
                        </div>
                        <div class="flex justify-between text-amber-700">
                            <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
                            <span class="text-green-600 font-bold">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                        </div>
                        <div class="border-t border-amber-200 pt-3">
                            <div class="flex justify-between text-lg font-bold text-amber-900">
                                <span>–ò—Ç–æ–≥–æ</span>
                                <span>{{ total|floatformat:2 }}‚ÇΩ</span>
                            </div>
                        </div>
                    </div>

                    <!-- –ë–æ–Ω—É—Å—ã -->
<div class="bg-gradient-to-r from-amber-100 to-amber-200 rounded-2xl p-4">
    <p class="text-amber-700 text-sm text-center">
        üíé –ó–∞ —ç—Ç–æ—Ç –∑–∞–∫–∞–∑ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 
        <strong class="text-amber-900">{{ bonus_points }} –±–æ–Ω—É—Å–æ–≤</strong>
    </p>
</div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-amber-900 mb-4 flex items-center">
                        <span class="mr-2">üöö</span>
                        –î–æ—Å—Ç–∞–≤–∫–∞
                    </h3>
                    <p class="text-amber-700 text-sm">
                        –î–æ—Å—Ç–∞–≤–ª—è–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫—É. 
                        –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 2000‚ÇΩ.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- –§–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="fixed bottom-0 left-0 w-60 h-60 bg-amber-400/10 rounded-full blur-3xl -z-10"></div>
    <div class="fixed top-1/3 right-0 w-80 h-80 bg-amber-600/5 rounded-full blur-3xl -z-10"></div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        
        menuToggle.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
        
        document.addEventListener('click', function(event) {
            if (!event.target.closest('#mobile-menu') && !event.target.closest('#menu-toggle')) {
                mobileMenu.classList.add('hidden');
            }
        });

        // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        const phoneInput = document.querySelector('input[name="phone"]');
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.startsWith('7') || value.startsWith('8')) {
                value = value.substring(1);
            }
            
            let formattedValue = '+7 (';
            if (value.length > 0) formattedValue += value.substring(0, 3);
            if (value.length > 3) formattedValue += ') ' + value.substring(3, 6);
            if (value.length > 6) formattedValue += '-' + value.substring(6, 8);
            if (value.length > 8) formattedValue += '-' + value.substring(8, 10);
            
            e.target.value = formattedValue;
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        const elements = document.querySelectorAll('.neo-card, .glass-card');
        elements.forEach((el, index) => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            
            setTimeout(() => {
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            }, index * 200);
        });
    });
    </script>
</body>
</html>